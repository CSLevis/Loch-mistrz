{% extends "base.html" %}
{% block title %}{{ _('char_cards_title') }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='character_cards.css') }}">

<div class="floating-image" id="img"></div>
<div class="overlay2"></div>

<div class="cards-container">
    <div class="cards-header">
        <h1 class="header-text">{{ _('char_cards_title') }}</h1>
        <a href="{{ url_for('wybierz_system') }}" class="btn-new-card">{{ _('char_new_card') }}</a>
    </div>

    <!-- Sekcja Warhammer -->
    <h2 class="system-title">Warhammer Fantasy</h2>
    {% if warhammer_cards %}
    <div class="cards-grid">
        {% for character in warhammer_cards %}
        <div class="character-card">
            <div class="card-header">
                <h3>{{ character.imie or _('char_no_name') }}</h3>
                <span class="card-profession">{{ character.profesja or _('char_no_prof') }}</span>
            </div>

            <div class="card-info">
                <p><strong>{{ _('char_player') }}</strong> {{ character.gracz or '-' }}</p>
                <p><strong>{{ _('char_age') }}</strong> {{ character.wiek or '-' }} | <strong>{{ _('char_sex')
                        }}</strong> {{ character.plec or '-'
                    }}</p>
            </div>

            <div class="card-stats">
                <span>{{ _('stat_s') }}: {{ character.s }}</span>
                <span>{{ _('stat_zr_short') }}: {{ character.zr }}</span>
                <span>{{ _('stat_kon') }}: {{ character.kon }}</span>
                <span>{{ _('stat_intel') }}: {{ character.intel }}</span>
            </div>

            <div class="card-actions">
                <a href="{{ url_for('edytuj_karte_warhammer', character_id=character.id) }}" class="btn btn-create">{{
                    _('char_edit') }}</a>
                <form method="POST" action="{{ url_for('usun_karte_warhammer', character_id=character.id) }}"
                    style="display: inline;">
                    <button type="submit" class="btn btn-create"
                        onclick="return confirm('{{ _('char_delete_confirm') }}')">{{ _('char_delete') }}</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-cards-info">{{ _('char_no_cards_system', 'Warhammer') }}</p>
    {% endif %}

    <!-- Sekcja D&D 5e -->
    <h2 class="system-title">D&D 5e</h2>
    {% if dnd5e_cards %}
    <div class="cards-grid">
        {% for character in dnd5e_cards %}
        <div class="character-card">
            <div class="card-header">
                <h3>{{ character.imie or _('char_no_name') }}</h3>
                <span class="card-profession">{{ character.klasa or _('char_no_class') }}</span>
            </div>
            <div class="card-info">
                <p><strong>{{ _('char_player') }}</strong> {{ character.gracz or '-' }}</p>
                <p><strong>{{ _('char_level') }}</strong> {{ character.poziom or '-' }} | <strong>{{ _('char_race')
                        }}</strong> {{ character.rasa or
                    '-' }}</p>
            </div>
            <div class="card-stats">
                <span>{{ _('stat_power') }}: {{ character.sila }}</span>
                <span>{{ _('stat_dex') }}: {{ character.zrecznosc }}</span>
                <span>{{ _('stat_kp') }}: {{ character.klasa_pancerza }}</span>
            </div>
            <div class="card-actions">
                <a href="{{ url_for('edytuj_karte_dnd5e', character_id=character.id) }}" class="btn btn-create">{{
                    _('char_edit') }}</a>
                <form method="POST" action="{{ url_for('usun_karte_dnd5e', character_id=character.id) }}"
                    style="display: inline;">
                    <button type="submit" class="btn btn-create"
                        onclick="return confirm('{{ _('char_delete_confirm') }}')">{{ _('char_delete') }}</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-cards-info">{{ _('char_no_cards_system', 'D&D 5e') }}</p>
    {% endif %}

    <!-- Sekcja Call of Cthulhu -->
    <h2 class="system-title">Call of Cthulhu</h2>
    {% if cthulhu_cards %}
    <div class="cards-grid">
        {% for character in cthulhu_cards %}
        <div class="character-card">
            <div class="card-header">
                <h3>{{ character.imie or _('char_no_name') }}</h3>
                <span class="card-profession">{{ character.zawod or _('char_no_job') }}</span>
            </div>

            <div class="card-info">
                <p><strong>{{ _('char_player') }}</strong> {{ character.gracz or '-' }}</p>
                <p><strong>{{ _('char_age') }}</strong> {{ character.wiek or '-' }}</p>
            </div>

            <div class="card-stats">
                <span>{{ _('stat_power') }}: {{ character.sila }}</span>
                <span>{{ _('stat_intel') }}: {{ character.inteligencja }}</span>
                <span>{{ _('stat_sanity') }}: {{ character.poczytalnosc }}</span>
            </div>

            <div class="card-actions">
                <a href="{{ url_for('edytuj_karte_cthulhu', character_id=character.id) }}" class="btn btn-create">{{
                    _('char_edit') }}</a>
                <form method="POST" action="{{ url_for('usun_karte_cthulhu', character_id=character.id) }}"
                    style="display: inline;">
                    <button type="submit" class="btn btn-create"
                        onclick="return confirm('{{ _('char_delete_confirm') }}')">{{ _('char_delete') }}</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-cards-info">{{ _('char_no_cards_system', 'Cthulhu') }}</p>
    {% endif %}

</div>

<script src="{{ url_for('static', filename='main.js') }}?v={{ range(1, 9999) | random }}"></script>
{% endblock %}